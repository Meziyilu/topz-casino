/* =========================================================
   百家樂 – 玻璃質感深色主題（響應式強化）
   檔案：/public/styles/baccarat.css
   與 page.tsx 對應：
   .dark-theme .room-header .chip .cards-area .betting-panel ...
========================================================= */

/* ========== 主題底色與字體 / 基礎縮放 ========== */
:root {
  --bg-0: #070b16;
  --bg-1: #0b1220;
  --bg-2: #121a2b;
  --glass: rgba(255, 255, 255, 0.06);
  --glass-strong: rgba(255, 255, 255, 0.12);
  --stroke: rgba(255, 255, 255, 0.12);

  --text-main: #e5e7eb;
  --text-sub: #9ca3af;

  --green-0: #042f2e;   /* 深綠底 */
  --green-1: #065f46;   /* 面板 */
  --green-2: #059669;   /* hover */
  --green-3: #10b981;   /* active */

  --player: #2563eb;
  --banker: #dc2626;
  --tie: #f59e0b;

  --win-glow-1: #facc15;
  --win-glow-2: #fde047;

  /* 以 clamp 做卡片自適應（會被後面媒體查詢微調） */
  --card-w: clamp(62px, 9vw, 92px);
  --card-h: calc(var(--card-w) * 1.5);

  --radius: 16px;

  /* 內距（會含安全區域） */
  --page-pad: clamp(12px, 3vw, 28px);
}

html, body {
  background:
    radial-gradient(1200px 800px at 20% -10%, #1a1440 0%, var(--bg-1) 42%),
    radial-gradient(800px 600px at 110% 30%, #082431 0%, var(--bg-1) 40%),
    var(--bg-0);
  color: var(--text-main);
  font-family: "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans TC", "PingFang TC", sans-serif;
  line-height: 1.45;
}

.dark-theme {
  min-height: 100vh;
  padding-left: max(var(--page-pad), env(safe-area-inset-left));
  padding-right: max(var(--page-pad), env(safe-area-inset-right));
}

/* ========== Header（含黏頂、行動裝置安全區） ========== */
.room-header {
  position: sticky;
  top: env(safe-area-inset-top, 0px);
  z-index: 40;

  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 16px;
  align-items: center;

  padding: 14px max(var(--page-pad), env(safe-area-inset-right));
  padding-left: max(var(--page-pad), env(safe-area-inset-left));

  backdrop-filter: blur(10px);
  background: linear-gradient(180deg, var(--glass) 0%, rgba(255,255,255,0.03) 100%);
  border-bottom: 1px solid var(--stroke);
}
.room-header .title { display: flex; flex-direction: column; gap: 6px; }
.room-header h1 { font-size: clamp(20px, 2.2vw, 28px); font-weight: 800; letter-spacing: 1px; }
.room-header span { font-size: 14px; color: var(--text-sub); }

.wallet {
  font-weight: 700;
  font-size: 16px;
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--glass);
  border: 1px solid var(--stroke);
}

.chips { display: flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
.chip {
  padding: 10px 16px;                 /* 提升觸控命中 */
  border-radius: 999px;
  background: var(--glass);
  border: 1px solid var(--stroke);
  color: var(--text-main);
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
  font-weight: 700;
  touch-action: manipulation;
}
.chip:hover { transform: translateY(-1px); background: var(--glass-strong); }
.chip.active { background: var(--green-2); border-color: transparent; color: #fff; }

/* ========== 開牌區 ========== */
.cards-area {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: clamp(14px, 2vw, 24px);
  padding: clamp(14px, 2.2vw, 26px);
  margin: clamp(14px, 2.4vw, 28px);
  border-radius: var(--radius);
  backdrop-filter: blur(10px);
  background: linear-gradient(180deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
  border: 1px solid var(--stroke);
  box-shadow: 0 8px 30px rgba(0,0,0,.35);
  position: relative;
  overflow: hidden;
}

.side { text-align: center; }
.side h2 { font-size: 18px; margin-bottom: 10px; opacity: .9; letter-spacing: 2px; }
.cards { display: flex; gap: clamp(8px, 1.2vw, 16px); justify-content: center; }

.card {
  width: var(--card-w);
  height: var(--card-h);
  border-radius: 10px;
  background: linear-gradient(180deg, #3b4458 0%, #2b3345 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(18px, 2.2vw, 22px);
  font-weight: 900;
  color: #f9fafb;
  box-shadow: 0 6px 22px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.08);
  transform-style: preserve-3d;
  transition: transform .6s ease, box-shadow .4s ease;
}

/* 翻牌 + 金光 */
.flip-cards .card { transform: rotateY(180deg); }
.reveal-gold .card { animation: revealFlash 1.1s ease-in-out; }
@keyframes revealFlash {
  0%   { box-shadow: 0 0 12px #ffd700, inset 0 0 0 1px rgba(255,255,255,.08); }
  55%  { box-shadow: 0 0 44px #ffdb55, inset 0 0 0 1px rgba(255,255,255,.12); }
  100% { box-shadow: 0 0 0 rgba(0,0,0,0), inset 0 0 0 1px rgba(255,255,255,.06); }
}

/* 勝家高亮（整個牌區邊緣） */
.winner-player { box-shadow: 0 0 0 2px rgba(37,99,235,.6) inset, 0 0 20px rgba(37,99,235,.35) inset; }
.winner-banker { box-shadow: 0 0 0 2px rgba(220,38,38,.6) inset, 0 0 20px rgba(220,38,38,.35) inset; }
.winner-tie    { box-shadow: 0 0 0 2px rgba(245,158,11,.7) inset, 0 0 20px rgba(245,158,11,.35) inset; }

/* ========== 勝利 Lottie 特效（置中覆蓋） ========== */
.win-fx-overlay {
  position: fixed;
  z-index: 60;
  pointer-events: none;
  width: min(540px, 72vw);
  height: min(540px, 72vw);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -52%);
  opacity: .98;
}

/* ========== 下注面板（綠色大卡片） ========== */
.betting-panel {
  margin: clamp(14px, 2.4vw, 28px);
  padding: clamp(14px, 2vw, 22px);
  border-radius: var(--radius);
  box-shadow: 0 10px 28px rgba(0,0,0,.45);
  border: 1px solid rgba(0,0,0,.25);
  display: grid;
  gap: 14px;
  /* 預設：手機 2 欄；中型 3 欄；桌機 4 欄 */
  grid-template-columns: repeat(2, minmax(150px, 1fr));
}
@media (min-width: 640px) {
  .betting-panel { grid-template-columns: repeat(3, minmax(180px, 1fr)); }
}
@media (min-width: 1024px) {
  .betting-panel { grid-template-columns: repeat(4, minmax(180px, 1fr)); }
}

.green-panel {
  background:
    radial-gradient(600px 300px at 10% 0%, rgba(16,185,129,.20) 0%, rgba(6,95,70,.15) 50%, transparent 80%),
    linear-gradient(180deg, rgba(6,95,70,.55) 0%, rgba(4,47,46,.65) 100%);
  border: 1px solid rgba(16,185,129,.25);
}

/* 大卡片按鈕（帶數字、小字、光暈） */
.bet-btn {
  position: relative;
  isolation: isolate;
  display: grid;
  grid-template-rows: auto auto auto;
  align-items: center;
  justify-items: center;
  padding: 18px;
  min-height: 104px;               /* 可被小螢幕壓縮 */
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, rgba(6,95,70,.55) 0%, rgba(4,47,46,.85) 100%);
  color: #ecfdf5;
  cursor: pointer;
  font-weight: 800;
  letter-spacing: 1px;
  transition: transform .14s ease, background .14s ease, box-shadow .14s ease, border-color .14s ease;
  box-shadow:
    0 12px 28px rgba(0,0,0,.45),
    inset 0 0 0 1px rgba(255,255,255,.06);
  touch-action: manipulation;
}
.bet-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  background: linear-gradient(180deg, rgba(16,185,129,.65) 0%, rgba(4,47,46,.9) 100%);
  border-color: rgba(16,185,129,.45);
  box-shadow:
    0 18px 36px rgba(0,0,0,.55),
    0 0 16px rgba(16,185,129,.25);
}
.bet-btn:active:not(:disabled) { transform: translateY(0); }
.bet-btn:disabled {
  cursor: not-allowed;
  opacity: .65;
  background: linear-gradient(180deg, rgba(55,65,81,.5) 0%, rgba(31,41,55,.7) 100%);
  border-color: rgba(255,255,255,.04);
}

/* 文字配置：主標 / 賠率 / 已下注 */
.bet-btn > span:first-child { font-size: clamp(18px, 1.8vw, 22px); line-height: 1; }
.bet-btn .amt { margin-top: 4px; font-size: 14px; font-weight: 700; opacity: .9; }

/* 勝家發光（下注卡片） */
.glow-win {
  animation: glowPulse 1.1s ease-in-out infinite;
  box-shadow:
    0 0 0 1px rgba(250,204,21,.5) inset,
    0 0 18px rgba(250,204,21,.35),
    inset 0 0 16px rgba(250,204,21,.25);
}
@keyframes glowPulse {
  0%   { box-shadow: 0 0 8px var(--win-glow-1), inset 0 0 12px rgba(250,204,21,.25); }
  50%  { box-shadow: 0 0 28px var(--win-glow-2), inset 0 0 26px rgba(253,224,71,.35); }
  100% { box-shadow: 0 0 8px var(--win-glow-1), inset 0 0 12px rgba(250,204,21,.25); }
}

/* ========== 路子（珠盤） ========== */
.bead-road {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 14px 18px;
  margin: 0 clamp(14px, 2.4vw, 28px) clamp(14px, 2.4vw, 28px);
  border-radius: 14px;
  backdrop-filter: blur(8px);
  background: linear-gradient(180deg, rgba(255,255,255,.06) 0%, rgba(255,255,255,.02) 100%);
  border: 1px solid var(--stroke);
}
.dot {
  width: 18px; height: 18px; border-radius: 50%;
  box-shadow: 0 4px 10px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.15);
}
.dot.player { background: var(--player); }
.dot.banker { background: var(--banker); }
.dot.tie    { background: var(--tie); }

/* ========== 歷史（卡片） ========== */
.history { margin: 0 clamp(14px, 2.4vw, 28px) clamp(18px, 3vw, 36px); }
.history h3 { font-size: clamp(16px, 1.6vw, 18px); margin: 12px 0; color: #f3f4f6; }

.history-list { display: grid; gap: 12px; }
.history-card {
  background: linear-gradient(180deg, rgba(31,41,55,.8) 0%, rgba(17,24,39,.92) 100%);
  border: 1px solid var(--stroke);
  border-radius: 14px;
  padding: 12px 16px;
  box-shadow: 0 10px 24px rgba(0,0,0,.4);
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}
.history-card:hover {
  transform: translateY(-2px);
  border-color: rgba(255,255,255,.18);
  background: linear-gradient(180deg, rgba(43,53,69,.9) 0%, rgba(25,32,46,.96) 100%);
}
.history-card .round-id { font-weight: 800; margin-bottom: 6px; color: #e5e7eb; }
.history-card .bets { font-size: 14px; color: var(--text-sub); }
.history-card .payouts { font-size: 14px; color: var(--green-3); font-weight: 800; margin-top: 4px; }

/* ========== 響應式斷點 ========== */

/* 小螢幕：<= 720px（手機直立） */
@media (max-width: 720px) {
  .room-header { grid-template-columns: 1fr; gap: 10px; }
  .chips, .wallet { justify-self: start; }
  .cards-area {
    grid-template-columns: 1fr;      /* 牌面改一欄堆疊 */
    text-align: center;
  }
  .win-fx-overlay {
    width: min(420px, 86vw);
    height: min(420px, 86vw);
  }
  .betting-panel {
    grid-template-columns: repeat(2, minmax(140px, 1fr));
  }
}

/* 中螢幕：721–1024px（平板/橫置手機） */
@media (min-width: 721px) and (max-width: 1024px) {
  :root {
    --card-w: clamp(68px, 8.6vw, 88px);
    --card-h: calc(var(--card-w) * 1.5);
  }
  .cards-area { grid-template-columns: 1fr 1fr; }
  .betting-panel { grid-template-columns: repeat(3, minmax(160px, 1fr)); }
}

/* 大螢幕：>= 1025px（桌機） */
@media (min-width: 1025px) {
  :root {
    --card-w: clamp(76px, 7.2vw, 96px);
    --card-h: calc(var(--card-w) * 1.5);
  }
}

/* 超寬：>= 1440px（大桌機/TV） */
@media (min-width: 1440px) {
  :root {
    --card-w: 92px;                 /* 上限 */
    --card-h: calc(92px * 1.5);
  }
  .betting-panel { grid-template-columns: repeat(4, minmax(180px, 1fr)); }
}

/* 手機橫向（高度較矮時，縮小外距/內距，避免捲動過多） */
@media (orientation: landscape) and (max-height: 540px) {
  .cards-area { margin: 12px; padding: 12px; gap: 10px; }
  .betting-panel { margin: 12px; padding: 12px; gap: 10px; }
  .history { margin: 0 12px 16px; }
}

/* ========== 動畫偏好（減少動態） ========== */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
  .flip-cards .card { transform: none; }
}
