/* =========================================================
   Topz Social – Unified Styles
   ========================================================= */
:root {
  --s-bg: rgba(255,255,255,0.06);
  --s-bg-strong: rgba(255,255,255,0.10);
  --s-border: rgba(255,255,255,0.12);
  --s-border-weak: rgba(255,255,255,0.08);
  --s-text: #fff;
  --s-text-dim: rgba(255,255,255,.75);
  --s-text-mute: rgba(255,255,255,.6);
  --s-primary: #7c5cff;
  --s-primary-2: #5f43de;
  --s-danger: #ff5c7a;
  --s-success: #2ecc71;
  --s-card-radius: 16px;
  --s-btn-radius: 12px;
  --s-shadow: 0 8px 24px rgba(0,0,0,.28);
  --s-blur: saturate(120%) blur(6px);
}

/* ---- layout ---- */
.social-wrap {
  display: grid;
  grid-template-columns: minmax(0,1fr);
  gap: 12px;
}
@media (min-width: 960px) {
  .social-wrap.with-aside { grid-template-columns: 300px minmax(0,1fr); }
}

/* ---- utilities ---- */
.s-flex { display: flex; }
.s-col { display:flex; flex-direction:column; }
.s-center { display:flex; align-items:center; justify-content:center; }
.s-gap-4{gap:4px}.s-gap-6{gap:6px}.s-gap-8{gap:8px}.s-gap-10{gap:10px}.s-gap-12{gap:12px}.s-gap-16{gap:16px}
.s-mt-8{margin-top:8px}.s-mt-12{margin-top:12px}.s-mt-16{margin-top:16px}
.s-w-full{width:100%}

/* ---- card ---- */
.s-card {
  background: var(--s-bg);
  border: 1px solid var(--s-border);
  border-radius: var(--s-card-radius);
  box-shadow: var(--s-shadow);
  backdrop-filter: var(--s-blur); 
  -webkit-backdrop-filter: var(--s-blur);
  color: var(--s-text);
  padding: 16px;
}
.s-card-title {
  font-size: 1.25rem; /* 放大標題字體 */
  font-weight: 800;
  color: #ffffff; /* 白色 */
  margin-bottom: 12px;
}
.s-card-subtitle {
  font-size: 1rem; /* 放大副標題字體 */
  font-weight: 500;
  color: #ffffff; /* 白色 */
  opacity: 0.9;
  margin-bottom: 8px;
}

/* ---- buttons ---- */
.s-btn {
  display:inline-flex;align-items:center;justify-content:center;
  padding:10px 14px;border-radius:var(--s-btn-radius);
  font-weight:700;letter-spacing:.2px;border:1px solid var(--s-border-weak);
  background:var(--s-bg);color:var(--s-text);cursor:pointer;
  transition:transform .15s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease
}
.s-btn:hover{transform:translateY(-1px);background:var(--s-bg-strong)}
.s-btn:active{transform:translateY(0);opacity:.95}
.s-btn:disabled{opacity:.6;cursor:not-allowed}
.s-btn.primary{background:linear-gradient(180deg,var(--s-primary),var(--s-primary-2));border-color:transparent;box-shadow:0 8px 22px rgba(124,92,255,.35)}
.s-btn.primary:hover{filter:brightness(1.06)}
.s-btn.ghost{background:transparent;border-color:var(--s-border)}
.s-btn.danger{background:linear-gradient(180deg,var(--s-danger),#e04563);border-color:transparent;box-shadow:0 8px 22px rgba(255,92,122,.32)}
.s-btn.pill{border-radius:999px}
.s-btn.sm{padding:6px 10px;font-size:12px}
.s-btn.lg{padding:12px 18px;font-size:15px}

/* icon button */
.s-icon-btn{
  width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;
  border-radius:10px;border:1px solid var(--s-border-weak);background:var(--s-bg);
  transition:transform .15s ease, background .15s ease; cursor:pointer
}
.s-icon-btn:hover{transform:translateY(-1px);background:var(--s-bg-strong)}

/* ---- inputs ---- */
.s-input,.s-textarea,.s-select{
  width:100%;background:rgba(255,255,255,.05);border:1px solid var(--s-border);
  color:var(--s-text);border-radius:12px;padding:10px 12px;outline:none;
  transition:border-color .15s ease, background .15s ease, box-shadow .15s ease
}
.s-input:focus,.s-textarea:focus,.s-select:focus{
  border-color:var(--s-primary);box-shadow:0 0 0 3px rgba(124,92,255,.25);background:rgba(255,255,255,.07)
}
.s-textarea{min-height:100px;resize:vertical}

/* ---- tabs & header ---- */
.social-header{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-bottom:12px}
.social-tabs{display:inline-flex;gap:8px;background:rgba(255,255,255,.05);border:1px solid var(--s-border);border-radius:12px;padding:4px}
.social-tab{padding:8px 12px;border-radius:10px;color:var(--s-text-dim);cursor:pointer}
.social-tab.active{color:var(--s-text);background:var(--s-bg-strong)}

/* ---- lists ---- */
.s-list{display:grid;gap:10px}
.s-list-item{
  display:grid;grid-template-columns:48px 1fr auto;gap:10px;align-items:center;
  padding:10px;border:1px solid var(--s-border);border-radius:14px;background:rgba(255,255,255,.04);
  color:#fff;
}
.s-list-item:hover{
  background:rgba(255,255,255,0.08);
  transition: background 0.2s ease;
}
.s-avatar{width:48px;height:48px;border-radius:50%;object-fit:cover}

/* ---- grid ---- */
.social-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
@media (max-width:1280px){.social-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:640px){.social-grid{grid-template-columns:1fr}}

/* ---- feed ---- */
.post-card{position:relative;overflow:hidden}
.post-body{white-space:pre-wrap;line-height:1.6}
.post-media{width:100%;max-height:420px;object-fit:cover;border-radius:12px}
.post-footer{display:flex;gap:12px;align-items:center;color:var(--s-text-dim)}

/* ---- DM ---- */
.dm-wrap{display:grid;grid-template-columns:320px 1fr;gap:12px}
@media (max-width:960px){.dm-wrap{grid-template-columns:1fr}}
.dm-msgs{
  height:min(62vh,600px);overflow:auto;padding-right:4px;
  border:1px solid var(--s-border);border-radius:14px;background:rgba(255,255,255,.04)
}
.dm-inputbar{display:flex;gap:8px}

/* ---- visitors ---- */
.visitors-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px}
@media (max-width:1280px){.visitors-grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
@media (max-width:960px){.visitors-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:640px){.visitors-grid{grid-template-columns:1fr}}

/* ---- Social Entrances ---- */
.social-entry-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;margin-top:8px}
@media (min-width:1024px){.social-entry-grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
.social-entry{
  position:relative;display:flex;flex-direction:column;justify-content:flex-end;
  padding:14px;border-radius:16px;background:var(--s-bg);border:1px solid var(--s-border);
  overflow:hidden;transition:transform .15s ease, background .15s ease;min-height:120px
}
.social-entry:hover{transform:translateY(-2px);background:var(--s-bg-strong)}
.social-entry__lottie{position:absolute;top:50%;right:8px;transform:translateY(-50%);pointer-events:none;filter:drop-shadow(0 6px 16px rgba(0,0,0,.35))}
.social-entry__title{
  font-weight:700;
  font-size:1.1rem; /* 比原本更大 */
  color:#fff;
}
.social-entry__desc{
  opacity:.95;
  font-size:0.95rem; /* 字體也稍微放大 */
  color:#fff;
}

/* ---- reduced motion ---- */
@media (prefers-reduced-motion: reduce){
  .s-btn,.s-icon-btn,.s-card,.social-entry{transition:none}
}

/* === Comment Panel tweaks === */
.comment-panel-overlay { animation: overlayFade .18s ease both; }
@keyframes overlayFade { from { opacity: 0 } to { opacity: 1 } }

.comment-panel { animation: panelIn .22s ease both; }
@keyframes panelIn { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: translateY(0) } }

@media (max-width: 767px){
  .comment-panel{
    width: 100%;
    max-height: 80vh;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
}

/* ===============================
   Feed Page — Layout spacing
   =============================== */
.feed-page {
  display: grid;
  grid-template-columns: minmax(0,1fr);
  gap: 18px;
}
@media (min-width: 1024px) {
  .feed-page {
    grid-template-columns: minmax(0, 640px) 320px; /* 主欄 + 側欄 */
    align-items: start;
  }
}

/* -------------------------------
   Composer (發文框)
   ------------------------------- */
.post-composer {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  border-radius: 16px;
  background: var(--s-bg);
  border: 1px solid var(--s-border);
  box-shadow: var(--s-shadow);
  backdrop-filter: var(--s-blur);
  -webkit-backdrop-filter: var(--s-blur);
}

.post-composer .pc-row {
  display: grid;
  grid-template-columns: 48px 1fr;
  gap: 12px;
  align-items: start;
}

.post-composer .pc-avatar {
  width: 48px; height: 48px; border-radius: 50%;
  object-fit: cover; display: block;
  border: 1px solid var(--s-border-weak);
}

.post-composer .pc-inputs {
  display: grid;
  gap: 10px;
}

.post-composer .pc-textarea {
  width: 100%;
  min-height: 96px;
  resize: vertical;
  padding: 12px 14px;
  background: rgba(255,255,255,.05);
  border: 1px solid var(--s-border);
  color: var(--s-text);
  border-radius: 12px;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
.post-composer .pc-textarea:focus {
  border-color: var(--s-primary);
  box-shadow: 0 0 0 3px rgba(124,92,255,.25);
  background: rgba(255,255,255,.07);
}

.post-composer .pc-url {
  width: 100%;
  padding: 9px 12px;
  background: rgba(255,255,255,.05);
  border: 1px solid var(--s-border);
  color: var(--s-text);
  border-radius: 10px;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
.post-composer .pc-url:focus {
  border-color: var(--s-primary);
  box-shadow: 0 0 0 3px rgba(124,92,255,.2);
  background: rgba(255,255,255,.07);
}

.post-composer .pc-actions {
  display: flex; justify-content: space-between; align-items: center;
  gap: 10px; margin-top: 4px;
}
.post-composer .pc-left { display: flex; gap: 8px; align-items: center; }
.post-composer .pc-right { display: flex; gap: 10px; align-items: center; }

.post-composer .pc-tool {
  display:inline-flex; align-items:center; justify-content:center;
  gap: 8px; padding: 8px 12px;
  border-radius: 10px; border: 1px solid var(--s-border-weak);
  background: rgba(255,255,255,.04); color: var(--s-text-dim);
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, color .15s ease;
}
.post-composer .pc-tool:hover { transform: translateY(-1px); background: var(--s-bg-strong); color: var(--s-text); }

.post-composer .pc-submit {
  padding: 10px 16px; border-radius: 12px; border: none;
  background: linear-gradient(180deg, var(--s-primary), var(--s-primary-2));
  color: #fff; font-weight: 800; letter-spacing: .02em;
  box-shadow: 0 8px 22px rgba(124,92,255,.35);
  cursor: pointer; transition: transform .15s ease; 
}
.post-composer .pc-submit:hover { transform: translateY(-1px); }
.post-composer .pc-submit:disabled { opacity: .55; cursor: not-allowed; }

/* 預覽圖 */
.post-composer .pc-preview {
  display: grid; grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 8px; margin-top: 4px;
}
@media (max-width: 640px) { .post-composer .pc-preview { grid-template-columns: repeat(2, minmax(0,1fr)); } }
.post-composer .pc-thumb {
  position: relative; overflow: hidden; border-radius: 12px; border: 1px solid var(--s-border);
}
.post-composer .pc-thumb img { width:100%; height:100%; object-fit:cover; display:block; }

/* -------------------------------
   Feed List / Post Card
   ------------------------------- */
.feed-list { display: grid; gap: 12px; }
.post-card {
  background: var(--s-bg);
  border: 1px solid var(--s-border);
  border-radius: 16px;
  box-shadow: var(--s-shadow);
  backdrop-filter: var(--s-blur);
  -webkit-backdrop-filter: var(--s-blur);
  padding: 14px;
}

.post-head {
  display: grid; grid-template-columns: 48px 1fr auto; gap: 10px; align-items: center;
}
.post-head .ph-avatar {
  width: 48px; height: 48px; border-radius: 50%; object-fit: cover;
  border: 1px solid var(--s-border-weak);
}
.post-head .ph-meta { display: flex; flex-direction: column; gap: 2px; }
.post-head .ph-name { font-weight: 800; color: var(--s-text); }
.post-head .ph-time { font-size: 12px; color: var(--s-text-mute); }
.post-head .ph-more { color: var(--s-text-dim); }

.post-body { margin-top: 10px; color: var(--s-text); white-space: pre-wrap; line-height: 1.65; }

.post-media-grid {
  margin-top: 10px; display: grid; gap: 8px;
  grid-template-columns: repeat(2, minmax(0,1fr));
}
.post-media-grid.one   { grid-template-columns: 1fr; }
.post-media-grid.two   { grid-template-columns: repeat(2, 1fr); }
.post-media-grid.three { grid-template-columns: 2fr 1fr; grid-auto-rows: 160px; }
.post-media-grid.four  { grid-template-columns: repeat(2, 1fr); }

.post-media {
  position: relative; overflow: hidden; border-radius: 12px; border: 1px solid var(--s-border);
}
.post-media img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* 動作列 */
.post-actions {
  display: flex; gap: 10px; align-items: center; margin-top: 12px;
  color: var(--s-text-dim);
}
.post-actions .pa-btn {
  display:inline-flex; gap:8px; align-items:center; padding:8px 12px;
  background: rgba(255,255,255,.04); border:1px solid var(--s-border-weak);
  border-radius: 999px; cursor: pointer;
  transition: transform .15s ease, background .15s ease, color .15s ease, border-color .15s ease;
}
.post-actions .pa-btn:hover { transform: translateY(-1px); background: var(--s-bg-strong); color: var(--s-text); border-color: var(--s-border); }
.post-actions .pa-btn.active { color: #fff; background: linear-gradient(180deg,var(--s-primary),var(--s-primary-2)); border-color: transparent; box-shadow: 0 8px 22px rgba(124,92,255,.3); }

/* 留言區（簡版） */
.comments {
  margin-top: 12px; border-top: 1px dashed var(--s-border-weak); padding-top: 10px; display: grid; gap: 10px;
}
.comment-item {
  display: grid; grid-template-columns: 32px 1fr; gap: 8px;
}
.comment-item .ci-avatar{
  width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border:1px solid var(--s-border-weak);
}
.comment-item .ci-bubble{
  background: rgba(255,255,255,.05); border:1px solid var(--s-border-weak);
  border-radius: 12px; padding: 8px 10px; line-height: 1.5; color: var(--s-text);
}
.comment-form { display:flex; gap: 8px; }
.comment-form input {
  flex: 1; padding: 8px 10px; border-radius: 10px;
  border:1px solid var(--s-border); background: rgba(255,255,255,.05); color: var(--s-text);
}
.comment-form button {
  padding: 8px 12px; border-radius: 10px; border: none; cursor: pointer;
  background: linear-gradient(180deg,var(--s-primary),var(--s-primary-2)); color: #fff; font-weight: 800;
}

/* -------------------------------
   Empty / Loading / Sentinel
   ------------------------------- */
.feed-empty {
  display: grid; place-items: center; padding: 40px 16px;
  color: var(--s-text-mute);
  border: 1px dashed var(--s-border-weak);
  border-radius: 14px;
  background: rgba(255,255,255,.04);
}
.feed-loading {
  display:flex; align-items:center; justify-content:center; gap: 10px;
  color: var(--s-text-dim); padding: 14px;
}
.loader-dot {
  width: 8px; height: 8px; border-radius: 999px;
  background: var(--s-primary); box-shadow: 0 0 10px var(--s-primary);
  animation: pulseDot 1.2s infinite ease-in-out;
}
.loader-dot:nth-child(2) { animation-delay: .15s; }
.loader-dot:nth-child(3) { animation-delay: .3s; }
@keyframes pulseDot {
  0%, 80%, 100% { transform: scale(.8); opacity: .7; }
  40% { transform: scale(1.2); opacity: 1; }
}

/* -------------------------------
   Side column / Sticky hints
   ------------------------------- */
.feed-aside { position: sticky; top: 16px; display:grid; gap: 12px; }
.feed-card {
  background: var(--s-bg);
  border: 1px solid var(--s-border);
  border-radius: 16px;
  box-shadow: var(--s-shadow);
  backdrop-filter: var(--s-blur);
  -webkit-backdrop-filter: var(--s-blur);
  padding: 16px; color: var(--s-text);
}
.feed-card .title { font-weight: 800; margin-bottom: 6px; }

/* -------------------------------
   Responsive tweaks
   ------------------------------- */
@media (max-width: 1024px) {
  .feed-aside { position: static; }
}
