/* =========================================
   Profile Page — 深色玻璃 + 流光 + 更寬的表單間距
   ========================================= */

/* 基色系 */
:root {
  --pf-bg: #0b0f1a;
  --pf-card: rgba(20, 24, 36, 0.46);
  --pf-glass: rgba(255, 255, 255, 0.06);
  --pf-text: #dfe6ff;
  --pf-muted: #8ea0bf;
  --pf-border: rgba(255, 255, 255, 0.16);
  --pf-shadow: rgba(0, 0, 0, 0.35);
  --pf-accent: #5ac8fa; /* 霓虹藍 */
  --pf-accent2: #a78bfa; /* 紫光 */
  --pf-success: #34d399;
  --pf-danger: #f87171;
}

/* 背景與粒子 */
.pf-wrap { min-height: 100svh; color: var(--pf-text); position: relative; overflow: clip; }
.pf-bg {
  position: fixed; inset: 0; z-index: -2;
  background:
    radial-gradient(1200px 800px at 20% -10%, rgba(90, 200, 250, .18), transparent 60%),
    radial-gradient(1000px 700px at 90% 10%, rgba(167, 139, 250, .16), transparent 60%),
    radial-gradient(600px 500px at 60% 90%, rgba(52, 211, 153, .12), transparent 60%),
    var(--pf-bg);
}
.pf-particles::before,
.pf-particles::after {
  content: ""; position: fixed; inset: -10%;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,.08) 0 2px, transparent 2px),
    radial-gradient(circle at 60% 70%, rgba(255,255,255,.06) 0 2px, transparent 2px),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,.05) 0 2px, transparent 2px);
  background-size: 240px 240px, 180px 180px, 320px 320px;
  animation: pf-drift 28s linear infinite; z-index: -1;
}
.pf-particles::after { filter: blur(2px); opacity: .6; animation-duration: 42s; }
@keyframes pf-drift { from {transform: translate3d(0,0,0)} to {transform: translate3d(-10%, -6%, 0)} }

/* Header */
.pf-header {
  display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: center;
  padding: 18px clamp(16px, 4vw, 40px);
}
.pf-logo {
  font-weight: 800; letter-spacing: .08em; font-size: clamp(18px, 2.2vw, 24px);
  color: var(--pf-text); text-decoration: none;
  text-shadow:
    0 0 24px color-mix(in srgb, var(--pf-accent2) 50%, transparent),
    0 0 8px color-mix(in srgb, var(--pf-accent) 40%, transparent);
}
.pf-sub { margin-left: 10px; opacity: .8; letter-spacing: .1em }
.pf-nav { color: var(--pf-text); text-decoration: none; margin-left: 10px; opacity: .9 }
.pf-nav:hover { opacity: 1 }

/* HERO 卡（更寬、更多留白） */
.pf-hero {
  width: min(1080px, 92vw);
  margin: 6px auto 20px;
  border-radius: 20px;
  padding: clamp(18px, 3.6vw, 28px);
  border: 1px solid var(--pf-border);
  background:
    linear-gradient(180deg, var(--pf-glass), transparent 60%),
    radial-gradient(120% 100% at 10% 0%, rgba(90,200,250,.08), transparent 40%),
    radial-gradient(120% 120% at 100% 0%, rgba(167,139,250,.08), transparent 40%),
    var(--pf-card);
  box-shadow: 0 12px 28px var(--pf-shadow), inset 0 0 0 1px rgba(255,255,255,.04);
  display: grid; grid-template-columns: 320px 1fr; gap: clamp(18px, 3.4vw, 28px);
  position: relative; overflow: hidden;
}
.pf-hero-sheen {
  position: absolute; top: -50%; right: -30%;
  width: 60%; height: 200%;
  background: radial-gradient(closest-side, rgba(90,200,250,.18), transparent 60%);
  filter: blur(30px); pointer-events: none;
  animation: pf-sheen 8s linear infinite;
}
@keyframes pf-sheen { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }

.pf-hero-left { display: grid; align-content: start; }
.pf-hero-right { align-self: center; }
.pf-name { margin: 0 0 6px 0; font-size: clamp(20px, 2.4vw, 28px) }
.pf-vip { color: var(--pf-accent); font-weight: 700; margin-bottom: 14px }
.pf-balances { display: grid; grid-template-columns: repeat(2, minmax(160px, 1fr)); gap: 12px }
.pf-bal { border: 1px solid var(--pf-border); border-radius: 12px; padding: 12px;
  background: linear-gradient(180deg, rgba(255,255,255,.04), transparent);
}
.pf-bal span { color: var(--pf-muted); font-size: 13px }
.pf-bal b { display: block; margin-top: 6px; letter-spacing: .04em }

/* 頭像區：確保「上傳按鈕」在上層且不被遮住 */
.pf-avatar {
  --pf-tint: #00d1ff; /* 可由 inline style 覆蓋 */
  position: relative;
  width: 220px; aspect-ratio: 1; border-radius: 18px; overflow: hidden;
  border: 1px solid var(--pf-border);
  background: linear-gradient(180deg, rgba(255,255,255,.05), transparent 60%), var(--pf-card);
  box-shadow: 0 10px 22px var(--pf-shadow), inset 0 0 0 1px rgba(255,255,255,.03);
}
.pf-ava-core { position: absolute; inset: 0; z-index: 1; pointer-events: none; } /* 讓按鈕可點 */
.pf-ava-core img { width: 100%; height: 100%; object-fit: cover; display: block; }
.pf-ava-fallback { width: 100%; height: 100%; display: grid; place-items: center; font-size: 56px; opacity: .8 }

.pf-ava-frame { position: absolute; inset: 0; z-index: 2; pointer-events: none; }
.pf-ava-glow  { position: absolute; inset: -15%; z-index: 0; pointer-events: none; filter: blur(28px); opacity: .5 }

/* 上傳按鈕：固定右下、浮在最上層 */
.pf-file-btn {
  position: absolute; right: 10px; bottom: 10px; z-index: 5;
  display: inline-grid; place-items: center;
  padding: 8px 12px; border-radius: 10px;
  color: var(--pf-text); border: 1px solid var(--pf-border);
  background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.15));
  backdrop-filter: blur(8px);
  cursor: pointer; user-select: none;
  box-shadow: 0 8px 18px var(--pf-shadow), 0 0 18px color-mix(in srgb, var(--pf-accent) 30%, transparent);
}
.pf-file-btn:hover { transform: translateY(-1px); }
.pf-file-btn input { display: none; }

/* 編輯卡：更大的留白與網格，避免擁擠 */
.pf-card {
  width: min(1080px, 92vw);
  margin: 0 auto 80px;
  border-radius: 20px;
  padding: clamp(20px, 3.8vw, 32px);
  border: 1px solid var(--pf-border);
  background:
    linear-gradient(180deg, var(--pf-glass), transparent 60%),
    radial-gradient(120% 100% at 10% 0%, rgba(90,200,250,.08), transparent 40%),
    radial-gradient(120% 120% at 100% 0%, rgba(167,139,250,.08), transparent 40%),
    var(--pf-card);
  box-shadow: 0 12px 28px var(--pf-shadow), inset 0 0 0 1px rgba(255,255,255,.04);
  position: relative;
}

/* 表單網格：兩欄、超小螢幕改單欄；間距放大避免重疊 */
.pf-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(280px, 1fr));
  gap: 22px 26px;
}
@media (max-width: 960px) {
  .pf-hero { grid-template-columns: 1fr; }
  .pf-hero-left { justify-items: start; }
  .pf-grid { grid-template-columns: 1fr; }
}

/* 浮動標籤欄位（避免文字重疊） */
.pf-field { position: relative; }
.pf-field input,
.pf-field textarea {
  width: 100%;
  border-radius: 12px;
  border: 1px solid var(--pf-border);
  background: linear-gradient(180deg, rgba(255,255,255,.04), transparent);
  color: var(--pf-text);
  padding: 16px 14px 14px;
  font-size: 15px;
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
}
.pf-field textarea { resize: vertical; min-height: 110px; }

/* Label 預設蓋在上面，但會在 focus/有值 時上浮，避免重疊 */
.pf-field label {
  position: absolute; left: 12px; top: 12px; pointer-events: none;
  font-size: 13px; color: var(--pf-muted);
  transition: transform .15s ease, opacity .15s ease, background .15s ease;
  padding: 0 6px;
  background: linear-gradient(180deg, rgba(11,15,26,.8), rgba(11,15,26,.4));
  border-radius: 6px;
}
.pf-field input:focus + label,
.pf-field textarea:focus + label,
.pf-field input:not(:placeholder-shown) + label,
.pf-field textarea:not(:placeholder-shown) + label {
  transform: translateY(-16px) scale(.92);
  opacity: .9;
}

/* 寬欄 */
.pf-field.wide { grid-column: 1 / -1; }

/* 動作列 */
.pf-actions { display: flex; gap: 12px; margin-top: 8px; }
.pf-btn {
  border: 1px solid var(--pf-border);
  background: linear-gradient(180deg, var(--pf-glass), transparent);
  color: var(--pf-text);
  padding: 10px 14px; border-radius: 10px; cursor: pointer;
  text-decoration: none; display: inline-flex; align-items: center; justify-content: center;
}
.pf-btn.ghost { opacity: .9 }
.pf-btn:hover { transform: translateY(-1px) }

/* 霓虹邊緣（卡片 spec） */
.pf-ring { position: absolute; inset: 0; pointer-events: none; border-radius: 20px }
.pf-ring-1 { box-shadow: 0 0 42px color-mix(in srgb, var(--pf-accent) 22%, transparent) inset; }
.pf-ring-2 { box-shadow: 0 0 48px color-mix(in srgb, var(--pf-accent2) 18%, transparent) inset; }

/* Toast */
.pf-toast {
  position: fixed; left: 50%; bottom: 22px; transform: translateX(-50%);
  padding: 10px 14px; border-radius: 12px; border: 1px solid var(--pf-border);
  background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.15));
  backdrop-filter: blur(8px); box-shadow: 0 8px 18px var(--pf-shadow);
}
.pf-toast.ok { color: var(--pf-success) }
.pf-toast.err { color: var(--pf-danger) }

/* =========================================
   頭框（沿用你的 headframes.css 結構：外圈不遮圖片）
   若你有單獨的 headframes.css，也能一起生效
   ========================================= */
.pf-avatar.hf-none .pf-ava-frame { display: none }

/* 例：基本霓虹外框 */
.pf-avatar.hf-neon .pf-ava-frame {
  border: 2px solid color-mix(in srgb, var(--pf-tint) 80%, white 0%);
  box-shadow:
    0 0 24px color-mix(in srgb, var(--pf-tint) 60%, transparent),
    inset 0 0 8px color-mix(in srgb, var(--pf-tint) 40%, transparent);
  border-radius: 18px;
}

/* 例：皇家旋光（更誇張） */
.pf-avatar.hf-royal .pf-ava-frame {
  border-radius: 18px;
  background:
    conic-gradient(from 0deg, rgba(167, 139, 250, .25), rgba(90, 200, 250, .25), rgba(52, 211, 153, .25), rgba(167, 139, 250, .25));
  mix-blend-mode: screen;
  animation: pf-royal-spin 10s linear infinite;
  opacity: .9;
}
@keyframes pf-royal-spin { to { transform: rotate(360deg) } }

.pf-avatar.hf-royal .pf-ava-glow {
  background: radial-gradient(closest-side, color-mix(in srgb, var(--pf-tint) 38%, transparent), transparent 65%);
  filter: blur(28px); opacity: .7;
}
